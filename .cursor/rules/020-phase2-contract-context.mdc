---
description: Historical Phase 2 contract notes (deprecated for current Hinkal WebCLI flow).
globs: *
---

> Historical context only. Current canonical state is in:
> - `.cursor/rules/000-general-project-context.mdc`
> - `.cursor/rules/050-hinkal-webcli-handoff.mdc`

# PHASE 2 CONTEXT (HISTORICAL CONTRACT MILESTONE)

Phase 2 validated private supply plumbing through adapter/factory/vault patterns.

## Contract Artifacts (still relevant)

1. `contracts/PrivateSupplyAdapter.sol`
2. `contracts/VaultFactory.sol`
3. `contracts/UserVault.sol`
4. `contracts/mocks/MockAavePool.sol`
5. `contracts/mocks/MockPrivacyExecutor.sol`
6. `contracts/mocks/MockUSDC.sol`
7. `contracts/test/PrivateSupplyAdapter.t.sol`

## Script Artifacts

1. `scripts/deploy-vault-factory.sh`
2. `scripts/deploy-private-supply-adapter.sh`
3. `scripts/smoke-test-supply-adapter.sh`
4. `scripts/smoke-test-withdraw-supply-adapter.sh`
5. `scripts/sanity-check-mainnet-config.sh`

## Canonical Env Keys (current)

- `PRIVATE_EMPORIUM`
- `RPC_URL`
- `DEPLOYER_PRIVATE_KEY`
- `SUPPLY_TOKEN`
- `AAVE_POOL`
- `VAULT_FACTORY`
- `PRIVATE_SUPPLY_ADAPTER`

## Do Not Regress

1. Keep callback/executor access control restrictions.
2. Keep per-user vault isolation (`zkOwnerHash -> vault`).
3. Keep script `.env` parsing deterministic and explicit.
