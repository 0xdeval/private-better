---
description: General Project Context, Architecture, and Tech Stack for the Private Betting MVP. Always apply this to understand the goal and constraints.
globs: *
---

# PROJECT CONTEXT

We are building a "Private Betting MVP" for the Arbitrum Hackathon.
The goal is to allow users to bet on the Azuro Protocol without revealing their wallet address, using Railgun for privacy.

# ARCHITECTURE (STRICT)

1. **User Shields Funds:** Public USDC -> Private zkUSDC via Railgun.
2. **User Bets via "Relayer":** - Railgun Unshield Transaction -> Calls 'PrivateBetAdapter' contract.
   - _Crucial:_ The user's 0x wallet never interacts directly with the betting contract.
3. **Adapter Execution:** 'PrivateBetAdapter' contract receives funds and immediately places a bet on Azuro in the same transaction.
4. **Custody:** 'PrivateBetAdapter' holds the betting NFT.
5. **Claiming:** If the bet wins, 'PrivateBetAdapter' claims winnings and shields them back to the user's zkAddress.

# TECH STACK

- **Frontend:** React + TypeScript + Tailwind CSS
- **Package manager:** bun v1.2.17+
- **Smart Contracts:** Solidity ^0.8.20 (Hardhat or Foundry)
- **Web3:** Ethers.js v6 (Required for Railgun compatibility)
- **Privacy:** `@railgun-community/wallet`, `@railgun-community/engine`
- **Betting:** Azuro Protocol SDK (v2/v3)
- **Network:** Polygon Amoy (Testnet), Arbitrum One (Production)

# CODING RULES

1. **MVP Mindset:** Write simple, functional code. Avoid over-abstraction or complex design patterns unless necessary.
2. **Privacy First:** Never suggest a flow where the user sends ETH/tokens directly to the betting contract from their 0x address. All bets must go through the Railgun Relayer flow.
3. **No Hallucinations:** The Railgun SDK is complex. If unsure of a method, ask the user to check `node_modules` or documentation. Do not invent function names.
4. **Mocking:** If Azuro contracts are not available on the current testnet (e.g., Amoy), suggest creating a `MockAzuro` contract immediately to unblock development.
5. **Styling:** Use Tailwind CSS for a dark-mode, "hacker" aesthetic (green terminal text, dark backgrounds).

# SPECIFIC CONSTRAINTS

- **Solidity:** Always inherit `Ownable` for the Adapter contract.
- **React:** Manage state using standard Hooks (`useState`, `useEffect`). Avoid Redux or complex state managers for this MVP.
- **Math:** Ensure all BigInts are handled correctly (add 'n' suffix like `100n` or use `ethers.parseUnits`).

# DEPLOYMENT TARGETS

- **Dev/Test:** Chain ID 80002 (Polygon Amoy)
- **Production:** Chain ID 42161 (Arbitrum One)
