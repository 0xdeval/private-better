---
description: General project context for Private Better after pivot to private Aave supply/borrow flows.
globs: *
---

# PROJECT CONTEXT

We are building a private DeFi MVP for Arbitrum ecosystem eligibility.
The current direction is private supply (and later private borrow), not prediction markets.

# ARCHITECTURE (STRICT)

1. **Shield:** User moves public funds to private Railgun balance.
2. **Unshield Callback:** Railgun unshields to our adapter contract.
3. **Adapter Routing:** Adapter routes funds to user-isolated vault (`zkOwnerHash` keyed via factory).
4. **Yield Action:** Vault supplies funds to Aave pool.
5. **Privacy:** User public wallet is never used as strategy account identity.
6. **Later:** Withdraw/borrow outputs are shielded back to user private balance.

# TECH STACK

- **Frontend:** React + TypeScript + Tailwind CSS
- **Package manager:** bun v1.2.17+
- **Smart Contracts:** Solidity ^0.8.20 (Foundry)
- **Web3:** Ethers.js v6
- **Privacy:** `@railgun-community/wallet`, `@railgun-community/engine`
- **Yield Protocol:** Aave (target real chain), MockAavePool for early iteration
- **Network (dev):** Ethereum Sepolia (current integration) + mocks where needed
- **Network (final):** Arbitrum One / Arbitrum-supported deployment

# CODING RULES

1. **MVP First:** Prefer simple, verifiable happy-path implementations.
2. **Privacy First:** Keep user public wallet out of protocol-account identity.
3. **Isolation First:** Use one-vault-per-`zkOwnerHash` to avoid multi-user state mixing.
4. **No Hallucinations:** If unsure about Railgun/Aave method signatures, verify from installed code/docs.
5. **Mock Early:** Use `MockAavePool` and `MockRailgun` to unblock flow validation.

# DEPLOYMENT TARGETS

- **Local/dev validation:** Ethereum Sepolia with mocks or real Aave depending on stage.
- **Final hackathon deployment:** Arbitrum-compatible contracts and addresses.
