---
description: Cross-cutting Hinkal WebCLI handoff and troubleshooting notes.
globs: *
---

# HINKAL WEBCLI HANDOFF

1. Active runtime: browser WebCLI (`src/webcli/*`).
2. Integration core: `src/privacy/hinkalManager.ts` + `@hinkal/common`.
3. Contracts: adapter/factory/vault model in `contracts/`.

# RULES INDEX (USE TOGETHER)

1. `000-general-project-context.mdc`
2. `010-contracts-core-context.mdc`
3. `020-webcli-session-wallet-context.mdc`
4. `030-webcli-private-token-flow-context.mdc`
5. `040-webcli-hinkal-aave-flow-context.mdc`

# CROSS-CUTTING FAILURE MODES

1. `Insufficient funds`: private balance cannot cover amount and/or fee reserve.
2. Executor mismatch: adapter `privacyExecutor()` differs from configured Emporium.
3. Missing local secret: position secret is not in browser storage for that `positionId`.
4. Wrong chain/account: connected wallet differs from active session signer.
5. Borrow token disabled: adapter allowlist not configured.

# CHANGE SAFETY

1. Avoid changing semantics of existing commands without doc updates.
2. Keep contract auth/permissions constraints intact.
3. If behavior changes, update `README.md`, `docs/user-flows.md`, and this ruleset.
4. Validate every substantial change:
5. `bun run typecheck`
6. `bun run build:web`
